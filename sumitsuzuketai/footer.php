<footer class="site-footer">
    <div class="container">
        <div class="footer-top">
            <div class="footer-logo">
                <img src="<?php echo get_template_directory_uri(); ?>/assets/images/logo-white.png" alt="ã™ã¿ã¤ã¥ã‘éšŠ">
                <p class="footer-tagline">ãƒªãƒ¼ã‚¹ãƒãƒƒã‚¯ä¸€æ‹¬æŸ»å®šã‚µã‚¤ãƒˆ</p>
            </div>

            <div class="footer-contact">
                <div class="footer-tel">
                    <i class="fas fa-phone-alt"></i> 
                    <a href="tel:05058105875" class="tel-link">050-5810-5875</a>
                </div>
                <div class="footer-hours">
                    <span>å—ä»˜æ™‚é–“ï¼š9:00ã€œ19:00ï¼ˆå¹´ä¸­ç„¡ä¼‘ï¼‰</span>
                </div>
            </div>
        </div>

        <!-- ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³å½¢å¼ã®ãƒ•ãƒƒã‚¿ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
        <div class="footer-accordion">
            <div class="accordion-item">
                <div class="accordion-header">
                    <h3>ã‚µãƒ¼ãƒ“ã‚¹æ¡ˆå†…</h3>
                    <span class="accordion-icon"></span>
                </div>
                <div class="accordion-content">
                    <ul>
                        <li><a href="#about-leaseback" class="smooth-scroll">ãƒªãƒ¼ã‚¹ãƒãƒƒã‚¯ä¸€æ‹¬æŸ»å®šã¨ã¯</a></li>
                        <li><a href="#assessment-flow" class="smooth-scroll">æŸ»å®šã®æµã‚Œ</a></li>
                        <li><a href="#partner-companies" class="smooth-scroll">ææºä¼šç¤¾ä¸€è¦§</a></li>
                        <li><a href="#faq-section" class="smooth-scroll">ã‚ˆãã‚ã‚‹è³ªå•</a></li>
                    </ul>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header">
                    <h3>ãŠå½¹ç«‹ã¡æƒ…å ±</h3>
                    <span class="accordion-icon"></span>
                </div>
                <div class="accordion-content">
                    <ul>
                        <li><a href="#what-is-leaseback" class="smooth-scroll">ãƒªãƒ¼ã‚¹ãƒãƒƒã‚¯ã¨ã¯</a></li>
                        <li><a href="#benefits-section" class="smooth-scroll">ãƒªãƒ¼ã‚¹ãƒãƒƒã‚¯ã®ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ</a></li>
                        <li><a href="#success-cases" class="smooth-scroll">ãƒªãƒ¼ã‚¹ãƒãƒƒã‚¯æˆåŠŸäº‹ä¾‹</a></li>
                        <li><a href="#market-info" class="smooth-scroll">ãƒªãƒ¼ã‚¹ãƒãƒƒã‚¯ç›¸å ´æƒ…å ±</a></li>
                    </ul>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header">
                    <h3>ä¼šç¤¾æƒ…å ±</h3>
                    <span class="accordion-icon"></span>
                </div>
                <div class="accordion-content">
                    <ul>
                        <li><a href="<?php echo home_url('/company/'); ?>" target="_blank">ä¼šç¤¾æ¦‚è¦</a></li>
                        <li><a href="<?php echo home_url('/privacy/'); ?>" target="_blank">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a></li>
                        <li><a href="<?php echo home_url('/terms/'); ?>" target="_blank">åˆ©ç”¨è¦ç´„</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <div class="disclaimer-link">
                <a href="#" id="disclaimer-toggle">å…è²¬äº‹é …ã‚’è¡¨ç¤º</a>
            </div>
            
            <div class="disclaimer" id="disclaimer-content">
                <p>å½“ã‚µã‚¤ãƒˆã¯æœ€é©ãªãƒªãƒ¼ã‚¹ãƒãƒƒã‚¯ä¼šç¤¾ã‚’ã”ç´¹ä»‹ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚æŸ»å®šçµæœã‚„æˆç´„ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹äº‹ä¾‹ã‚„æ•°å€¤ã¯éå»ã®å®Ÿç¸¾ã«åŸºã¥ãã‚‚ã®ã§ã‚ã‚Šã€å°†æ¥ã®æˆæœã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ææºä¼šç¤¾æ•°ã‚„æŸ»å®šä¼šç¤¾æ•°ã¯æ™‚æœŸã«ã‚ˆã‚Šå¤‰å‹•ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p>
            </div>

            <div class="copyright">
                <p>&copy; <?php echo date('Y'); ?> ä½ã¿ç¶šã‘éšŠ All Rights Reserved.</p>
            </div>
        </div>
    </div>
</footer>

<!-- ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTAï¼ˆç”»åƒç‰ˆï¼‰ -->
<div class="floating-cta" id="floating-cta" style="display: none; opacity: 0;">
    <a href="#assessment-form" class="smooth-scroll floating-button" id="floating-button">
        <img src="<?php echo get_template_directory_uri(); ?>/assets/images/floating-cta-button.png" 
             alt="ç„¡æ–™æŸ»å®šã‚’ã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹" 
             class="floating-button-image">
    </a>
</div>

<!-- ğŸ¯ bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å°‚ç”¨æœ€é©åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
<script>
(function() {
    'use strict';
    
    console.log('ğŸ¯ bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æœ€é©åŒ–ç‰ˆé–‹å§‹');
    
    // ===========================================
    // ğŸ¯ bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å°‚ç”¨é–¢æ•°ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ãƒ»é«˜é€Ÿï¼‰
    // ===========================================
    function bodyScrollTo(targetSelector) {
        console.log('ğŸ¯ bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å®Ÿè¡Œ:', targetSelector);
        
        if (!targetSelector || targetSelector === '#') return false;
        
        const target = document.querySelector(targetSelector);
        if (!target) {
            console.error('âŒ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“:', targetSelector);
            return false;
        }
        
        // ã‚·ãƒ³ãƒ—ãƒ«ãªä½ç½®è¨ˆç®—
        let targetPosition = 0;
        let element = target;
        
        while (element && element !== document.body) {
            targetPosition += element.offsetTop || 0;
            element = element.offsetParent;
        }
        
        const headerOffset = 100;
        const finalPosition = Math.max(0, targetPosition - headerOffset);
        
        console.log('ğŸ“ ä½ç½®è¨ˆç®—:', {
            targetPosition,
            finalPosition,
            currentBodyScroll: document.body.scrollTop
        });
        
        // ğŸ¯ bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å°‚ç”¨å®Ÿè¡Œï¼ˆ1ã¤ã®æ–¹æ³•ã®ã¿ï¼‰
        try {
            // é€²è¡Œä¸­ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åœæ­¢
            if (window.scrollAnimationId) {
                cancelAnimationFrame(window.scrollAnimationId);
            }
            
            // ã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ ãƒ¼ã‚¹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆbodyã®scrollTopç›´æ¥åˆ¶å¾¡ï¼‰
            const startPosition = document.body.scrollTop;
            const distance = finalPosition - startPosition;
            const duration = 800; // 0.8ç§’
            const startTime = performance.now();
            
            function easeInOutCubic(t) {
                return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;
            }
            
            function animateScroll(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easeProgress = easeInOutCubic(progress);
                
                const currentPosition = startPosition + (distance * easeProgress);
                document.body.scrollTop = currentPosition;
                
                console.log('ğŸ¯ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é€²è¡Œ:', {
                    progress: Math.round(progress * 100) + '%',
                    currentPosition: Math.round(currentPosition),
                    targetPosition: finalPosition
                });
                
                if (progress < 1) {
                    window.scrollAnimationId = requestAnimationFrame(animateScroll);
                } else {
                    console.log('âœ… bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å®Œäº†');
                    window.scrollAnimationId = null;
                }
            }
            
            window.scrollAnimationId = requestAnimationFrame(animateScroll);
            
        } catch (error) {
            console.error('âŒ bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼:', error);
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: å³åº§ç§»å‹•
            document.body.scrollTop = finalPosition;
        }
        
        return true;
    }
    
    // ===========================================
    // ğŸ¯ bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å°‚ç”¨ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
    // ===========================================
    function createBodyScrollHandler(element) {
        return function(e) {
            const href = element.getAttribute('href');
            if (href && href.startsWith('#')) {
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                
                console.log('ğŸ”— bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒªãƒ³ã‚¯ã‚¯ãƒªãƒƒã‚¯:', href);
                
                // ã‚ãšã‹ãªé…å»¶ã§å®Ÿè¡Œï¼ˆä»–ã®ã‚¤ãƒ™ãƒ³ãƒˆã¨ã®ç«¶åˆã‚’é¿ã‘ã‚‹ï¼‰
                setTimeout(() => {
                    bodyScrollTo(href);
                }, 10);
                
                return false;
            }
        };
    }
    
    // ===========================================
    // ğŸ¯ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒªãƒ³ã‚¯åˆæœŸåŒ–
    // ===========================================
    function initBodyScrollLinks() {
        console.log('ğŸ¯ bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒªãƒ³ã‚¯åˆæœŸåŒ–');
        
        const selectors = [
            '.smooth-scroll',
            '.cta-button',
            '.floating-button',
            'a[href^="#assessment-form"]',
            'a[href^="#about-leaseback"]',
            'a[href^="#assessment-flow"]',
            'a[href^="#partner-companies"]',
            'a[href^="#faq-section"]',
            'a[href^="#what-is-leaseback"]',
            'a[href^="#benefits-section"]',
            'a[href^="#success-cases"]',
            'a[href^="#market-info"]'
        ];
        
        let totalElements = 0;
        
        selectors.forEach(selector => {
            const elements = document.querySelectorAll(selector);
            
            elements.forEach(element => {
                const href = element.getAttribute('href');
                if (href && href.startsWith('#') && href !== '#') {
                    // æ—¢å­˜ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å®Œå…¨ã«å‰Šé™¤
                    const newElement = element.cloneNode(true);
                    element.parentNode.replaceChild(newElement, element);
                    
                    // bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å°‚ç”¨ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®š
                    newElement.addEventListener('click', createBodyScrollHandler(newElement), true);
                    totalElements++;
                }
            });
            
            if (elements.length > 0) {
                console.log('âœ… bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«è¨­å®š:', selector, `(${elements.length}å€‹)`);
            }
        });
        
        console.log('ğŸ¯ bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒªãƒ³ã‚¯è¨­å®šå®Œäº† - åˆè¨ˆ:', totalElements + 'å€‹');
    }
    
    // ===========================================
    // ğŸˆ bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTA
    // ===========================================
    function initPerfectFloatingCTA() {
        console.log('ğŸˆ å®Œç’§ç‰ˆãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTAåˆæœŸåŒ–');
        
        const floatingCTA = document.getElementById('floating-cta');
        if (!floatingCTA) {
            console.warn('âš ï¸ ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTAè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            return;
        }
        
        // å¼·åˆ¶ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®š
        floatingCTA.style.cssText = `
            position: fixed !important;
            bottom: 20px !important;
            right: 20px !important;
            z-index: 9999 !important;
            display: block !important;
            opacity: 0 !important;
            visibility: hidden !important;
            transition: all 0.3s ease !important;
            pointer-events: auto !important;
        `;
        
        console.log('ğŸˆ ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTAåˆæœŸã‚¹ã‚¿ã‚¤ãƒ«è¨­å®šå®Œäº†');
        
        // bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç›£è¦–é–¢æ•°
        function handleFloatingCTA() {
            try {
                // è¤‡æ•°ã®æ–¹æ³•ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ã‚’å–å¾—
                const scrollMethods = [
                    () => document.body.scrollTop,
                    () => document.documentElement.scrollTop,
                    () => window.pageYOffset,
                    () => window.scrollY
                ];
                
                let scrollTop = 0;
                for (const method of scrollMethods) {
                    try {
                        const value = method();
                        if (value > scrollTop) {
                            scrollTop = value;
                        }
                    } catch (e) {
                        // ç„¡è¦–
                    }
                }
                
                const shouldShow = scrollTop > 300;
                
                console.log('ğŸˆ ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTAåˆ¤å®š:', {
                    bodyScrollTop: document.body.scrollTop,
                    documentScrollTop: document.documentElement.scrollTop,
                    windowPageYOffset: window.pageYOffset,
                    maxScroll: scrollTop,
                    shouldShow
                });
                
                if (shouldShow) {
                    floatingCTA.style.opacity = '1';
                    floatingCTA.style.visibility = 'visible';
                    floatingCTA.style.transform = 'translateY(0)';
                    console.log('âœ… ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTAè¡¨ç¤º');
                } else {
                    floatingCTA.style.opacity = '0';
                    floatingCTA.style.visibility = 'hidden';
                    floatingCTA.style.transform = 'translateY(10px)';
                    console.log('ğŸ”’ ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTAéè¡¨ç¤º');
                }
                
            } catch (error) {
                console.error('ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTAå‡¦ç†ã‚¨ãƒ©ãƒ¼:', error);
            }
        }
        
        // è¤‡æ•°ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã«å¯¾å¿œ
        const scrollTargets = [
            window,
            document,
            document.body,
            document.documentElement
        ];
        
        let scrollTicking = false;
        const throttledHandler = () => {
            if (!scrollTicking) {
                requestAnimationFrame(() => {
                    handleFloatingCTA();
                    scrollTicking = false;
                });
                scrollTicking = true;
            }
        };
        
        // å…¨ã¦ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
        scrollTargets.forEach(target => {
            try {
                if (target && target.addEventListener) {
                    target.addEventListener('scroll', throttledHandler, { passive: true });
                    console.log('âœ… ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š:', target.constructor.name);
                }
            } catch (e) {
                console.warn('ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®šå¤±æ•—:', e);
            }
        });
        
        // å®šæœŸçš„ãªçŠ¶æ…‹ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
        const intervalCheck = setInterval(() => {
            handleFloatingCTA();
        }, 1000);
        
        // æ‰‹å‹•ãƒˆãƒªã‚¬ãƒ¼ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
        window.triggerFloatingCheck = handleFloatingCTA;
        
        // åˆå›è¡¨ç¤ºãƒã‚§ãƒƒã‚¯
        setTimeout(() => {
            handleFloatingCTA();
            console.log('ğŸˆ ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTAåˆå›ãƒã‚§ãƒƒã‚¯å®Œäº†');
        }, 500);
        
        // 5ç§’å¾Œã«å¼·åˆ¶è¡¨ç¤ºï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
        setTimeout(() => {
            console.log('ğŸ§ª ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTAå¼·åˆ¶è¡¨ç¤ºãƒ†ã‚¹ãƒˆ');
            floatingCTA.style.opacity = '1';
            floatingCTA.style.visibility = 'visible';
            floatingCTA.style.transform = 'translateY(0)';
        }, 5000);
        
        console.log('âœ… å®Œç’§ç‰ˆãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTAåˆæœŸåŒ–å®Œäº†');
    }
    
    // ===========================================
    // ğŸµ è»½é‡ç‰ˆã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³
    // ===========================================
    function initLightAccordions() {
        console.log('ğŸµ è»½é‡ç‰ˆã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³åˆæœŸåŒ–');
        
        // ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', function() {
                const item = this.parentElement;
                const content = this.nextElementSibling;
                const isActive = item.classList.contains('active');
                
                // ä»–ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’é–‰ã˜ã‚‹
                document.querySelectorAll('.accordion-item.active').forEach(otherItem => {
                    if (otherItem !== item) {
                        otherItem.classList.remove('active');
                        const otherContent = otherItem.querySelector('.accordion-content');
                        if (otherContent) otherContent.style.maxHeight = '0px';
                    }
                });
                
                // ç¾åœ¨ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’åˆ‡ã‚Šæ›¿ãˆ
                item.classList.toggle('active');
                content.style.maxHeight = isActive ? '0px' : content.scrollHeight + 'px';
            });
        });
        
        // å…è²¬äº‹é …ãƒˆã‚°ãƒ«
        const disclaimerToggle = document.getElementById('disclaimer-toggle');
        const disclaimerContent = document.getElementById('disclaimer-content');
        
        if (disclaimerToggle && disclaimerContent) {
            disclaimerToggle.addEventListener('click', (e) => {
                e.preventDefault();
                const isActive = disclaimerContent.classList.contains('active');
                
                disclaimerContent.classList.toggle('active');
                disclaimerContent.style.maxHeight = isActive ? '0px' : disclaimerContent.scrollHeight + 'px';
                disclaimerToggle.textContent = isActive ? 'å…è²¬äº‹é …ã‚’è¡¨ç¤º' : 'å…è²¬äº‹é …ã‚’éš ã™';
            });
        }
        
        console.log('âœ… è»½é‡ç‰ˆã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³å®Œäº†');
    }
    
    // ===========================================
    // ğŸ¯ ãƒ¡ã‚¤ãƒ³åˆæœŸåŒ–
    // ===========================================
    function initializeBodyScroll() {
        console.log('ğŸ¯ bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åˆæœŸåŒ–é–‹å§‹');
        
        // é †æ¬¡åˆæœŸåŒ–
        setTimeout(() => initBodyScrollLinks(), 100);
        setTimeout(() => initPerfectFloatingCTA(), 300);
        setTimeout(() => initLightAccordions(), 500);
        
        console.log('âœ… bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åˆæœŸåŒ–å®Œäº†');
    }
    
    // DOMContentLoaded
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeBodyScroll);
    } else {
        initializeBodyScroll();
    }
    
    // ===========================================
    // ğŸ¯ ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆbodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å°‚ç”¨ï¼‰
    // ===========================================
    document.addEventListener('click', (e) => {
        if (e.defaultPrevented) return;
        
        let element = e.target;
        let attempts = 0;
        
        while (element && element.tagName !== 'A' && attempts < 3) {
            element = element.parentElement;
            attempts++;
            if (!element || element === document) return;
        }
        
        if (element && element.tagName === 'A') {
            const href = element.getAttribute('href');
            if (href && href.startsWith('#') && href !== '#') {
                e.preventDefault();
                console.log('ğŸ¯ ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ:', href);
                bodyScrollTo(href);
            }
        }
    }, true);
    
    // ===========================================
    // ğŸ¯ ãƒ‡ãƒãƒƒã‚°é–¢æ•°
    // ===========================================
    
    window.bodyScroll = function(target = '#faq-section') {
        console.log('ğŸ§ª bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆ:', target);
        return bodyScrollTo(target);
    };
    
    window.checkBodyScroll = function() {
        console.log('ğŸ” bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«çŠ¶æ…‹:', {
            bodyScrollTop: document.body.scrollTop,
            bodyScrollHeight: document.body.scrollHeight,
            bodyClientHeight: document.body.clientHeight,
            windowInnerHeight: window.innerHeight
        });
    };
    
    window.showFloating = function() {
        const cta = document.getElementById('floating-cta');
        if (cta) {
            cta.style.display = 'block';
            cta.style.opacity = '1';
            cta.style.visibility = 'visible';
            cta.style.transform = 'translateY(0)';
            console.log('âœ… ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTAæ‰‹å‹•è¡¨ç¤º');
        }
    };
    
    window.hideFloating = function() {
        const cta = document.getElementById('floating-cta');
        if (cta) {
            cta.style.opacity = '0';
            cta.style.visibility = 'hidden';
            cta.style.transform = 'translateY(10px)';
            console.log('ğŸ”’ ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTAæ‰‹å‹•éè¡¨ç¤º');
        }
    };
    
    window.toggleFloating = function() {
        const cta = document.getElementById('floating-cta');
        if (cta) {
            const isVisible = cta.style.opacity === '1';
            if (isVisible) {
                window.hideFloating();
            } else {
                window.showFloating();
            }
        }
    };
    
    console.log('ğŸ¯ bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æœ€é©åŒ–ç‰ˆèª­ã¿è¾¼ã¿å®Œäº†');
    console.log('ğŸ“‹ ãƒ†ã‚¹ãƒˆé–¢æ•°:');
    console.log('  - bodyScroll("#target")');
    console.log('  - checkBodyScroll()'); 
    console.log('  - showFloating() / hideFloating() / toggleFloating()');
    console.log('  - triggerFloatingCheck()');
    console.log('ğŸˆ ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTAã¯5ç§’å¾Œã«å¼·åˆ¶è¡¨ç¤ºã•ã‚Œã¾ã™ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰');
    
})();
</script>

<!-- ğŸ¯ bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å°‚ç”¨CSS -->
<style>
/* bodyã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æœ€é©åŒ– */
html {
    overflow: hidden !important;
    height: 100% !important;
}

body {
    overflow-x: hidden !important;
    overflow-y: auto !important;
    height: 100vh !important;
    scroll-behavior: auto !important; /* ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ç„¡åŠ¹åŒ– */
}

/* ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTA */
/* ğŸš€ å·¨å¤§ãƒ»å®Œå…¨ã‚ªãƒ¼ãƒ©ãªã—ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°CTA */
.floating-cta {
    position: fixed !important;
    bottom: 30px !important;
    right: 30px !important;
    z-index: 9999 !important;
    transform: translateY(10px) !important;
    background: none !important;
    box-shadow: none !important; /* å®Œå…¨å‰Šé™¤ */
    filter: none !important; /* å®Œå…¨å‰Šé™¤ */
}

/* ãƒ¡ã‚¤ãƒ³ãƒœã‚¿ãƒ³ï¼ˆå·¨å¤§ãƒ»å®Œå…¨ã‚ªãƒ¼ãƒ©ãªã—ï¼‰ */
.floating-button {
    position: relative !important;
    display: block !important;
    text-decoration: none !important;
    background: none !important;
    border: none !important;
    padding: 0 !important;
    margin: 0 !important;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    
    /* ğŸ¯ CSS ã‚¢ãƒ‹ãƒ¡ï¼š1.0â†’1.05å€ã®scaleã‚’3sã§ãƒ«ãƒ¼ãƒ—ï¼ˆã•ã‚‰ã«æ§ãˆã‚ï¼‰ */
    animation: giantPulseScale 3s ease-in-out infinite !important;
    
    /* ğŸ—‘ï¸ ã‚ªãƒ¼ãƒ©ãƒ»å½±ãƒ»ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå®Œå…¨å‰Šé™¤ */
    filter: none !important;
    box-shadow: none !important;
    text-shadow: none !important;
    outline: none !important;
    border: none !important;
    background: transparent !important;
}

/* ğŸ¯ å·¨å¤§ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆéå¸¸ã«æ§ãˆã‚ï¼‰ */
@keyframes giantPulseScale {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

/* ğŸ¯ ã‚¿ãƒƒãƒ—æ³¢ç´‹åŠ¹æœï¼ˆã‚ªãƒ¼ãƒ©ãªã—ãƒ»ã‚·ãƒ³ãƒ—ãƒ«ç‰ˆï¼‰ */
.floating-button::after {
    content: '' !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    width: 0 !important;
    height: 0 !important;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 0%, transparent 70%) !important;
    border-radius: 50% !important;
    transform: translate(-50%, -50%) !important;
    transition: all 0.5s ease-out !important;
    pointer-events: none !important;
    opacity: 0 !important;
    z-index: 1 !important;
}

.floating-button:active::after {
    width: 600px !important;
    height: 600px !important;
    opacity: 1 !important;
    transition: all 0.1s ease-out !important;
}

/* ãƒ›ãƒãƒ¼åŠ¹æœï¼ˆå®Œå…¨ã‚ªãƒ¼ãƒ©ãªã—ãƒ»å·¨å¤§ï¼‰ */
.floating-button:hover {
    transform: translateY(-3px) scale(1.08) !important;
    animation-play-state: paused !important;
    
    /* ğŸ—‘ï¸ å®Œå…¨ã‚ªãƒ¼ãƒ©ãªã— */
    filter: none !important;
    box-shadow: none !important;
    text-shadow: none !important;
    outline: none !important;
}

/* ç”»åƒæœ¬ä½“ï¼ˆå·¨å¤§ç‰ˆï¼‰ */
.floating-button-image {
    display: block !important;
    width: auto !important;
    height: 150px !important; /* å·¨å¤§åŒ–ï¼ˆ120pxâ†’150pxï¼‰ */
    max-width: 550px !important; /* å·¨å¤§åŒ–ï¼ˆ450pxâ†’550pxï¼‰ */
    border-radius: 0 !important;
    position: relative !important;
    z-index: 2 !important;
    background: transparent !important;
    
    /* ğŸ—‘ï¸ ç”»åƒã®ã‚ªãƒ¼ãƒ©ãƒ»å½±å®Œå…¨å‰Šé™¤ */
    filter: none !important;
    box-shadow: none !important;
    outline: none !important;
    border: none !important;
    
    /* ğŸ¯ çŸ¢å°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœï¼ˆéå¸¸ã«æ§ãˆã‚ï¼‰ */
    animation: giantImageSlide 4s ease-in-out infinite !important;
}

/* ğŸ¯ å·¨å¤§ç”»åƒã‚¹ãƒ©ã‚¤ãƒ‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆéå¸¸ã«æ§ãˆã‚ï¼‰ */
@keyframes giantImageSlide {
    0%, 100% { 
        transform: translateX(0px);
    }
    25% { 
        transform: translateX(1px);
    }
    50% { 
        transform: translateX(0px);
    }
    75% { 
        transform: translateX(1px);
    }
}

/* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ï¼ˆå®Œå…¨ã‚ªãƒ¼ãƒ©ãªã—ï¼‰ */
.floating-button:active {
    transform: translateY(-1px) scale(1.03) !important;
    filter: none !important;
    box-shadow: none !important;
}

/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œï¼ˆå·¨å¤§ç‰ˆï¼‰ */
@media (max-width: 768px) {
    .floating-cta {
        bottom: 20px !important;
        right: 20px !important;
    }
    
    .floating-button-image {
        height: 120px !important; /* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆç”¨å·¨å¤§ï¼ˆ100pxâ†’120pxï¼‰ */
        max-width: 450px !important;
    }
    
    .floating-button:hover {
        transform: translateY(-2px) scale(1.06) !important;
    }
}

@media (max-width: 480px) {
    .floating-cta {
        bottom: 15px !important;
        right: 15px !important;
    }
    
    .floating-button-image {
        height: 100px !important; /* ãƒ¢ãƒã‚¤ãƒ«ç”¨å·¨å¤§ï¼ˆ80pxâ†’100pxï¼‰ */
        max-width: 380px !important;
    }
    
    .floating-button:hover {
        transform: translateY(-1px) scale(1.04) !important;
    }
}

/* ğŸ¯ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆã‚ªãƒ¼ãƒ©ãªã—ï¼‰ */
.floating-button {
    will-change: transform !important;
    backface-visibility: hidden !important;
    perspective: 1000px !important;
}

/* ğŸ¯ ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æ”¹å–„ */
@media (prefers-reduced-motion: reduce) {
    .floating-button {
        animation: none !important;
    }
    
    .floating-button-image {
        animation: none !important;
    }
}

/* ğŸ—‘ï¸ å…¨ã¦ã®ã‚ªãƒ¼ãƒ©ãƒ»å½±ãƒ»èƒŒæ™¯è¦ç´ ã®å®Œå…¨å‰Šé™¤ï¼ˆå¼·åˆ¶ï¼‰ */
.floating-cta,
.floating-cta::before,
.floating-cta::after,
.floating-button,
.floating-button::before,
.floating-button-image,
.floating-button-image::before,
.floating-button-image::after {
    box-shadow: none !important;
    filter: none !important;
    text-shadow: none !important;
    outline: none !important;
    border: none !important;
    background: transparent !important;
    backdrop-filter: none !important;
    -webkit-filter: none !important;
    -webkit-box-shadow: none !important;
}

/* ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ */
.accordion-content {
    overflow: hidden !important;
    transition: max-height 0.3s ease !important;
}

/* ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– */
* {
    scroll-behavior: auto !important; /* ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®ãŸã‚ç„¡åŠ¹åŒ– */
}

@media (max-width: 768px) {
    .floating-button {
        font-size: 12px !important;
        padding: 10px 16px !important;
    }
}
</style>

<?php wp_footer(); ?>
</body>
</html>